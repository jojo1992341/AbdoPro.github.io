<!DOCTYPE html>
<html lang="fr" data-theme="dark">
<head>
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       AbdoPro ‚Äî Application de Progression Abdominaux
       Point d'entr√©e unique (SPA)
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="description"
        content="Programme de progression abdominaux adaptatif bas√© sur la science du sport.">

  <!-- ‚îÄ‚îÄ PWA Meta ‚îÄ‚îÄ -->
  <meta name="theme-color"             content="#6366f1">
  <meta name="apple-mobile-web-app-capable"           content="yes">
  <meta name="apple-mobile-web-app-status-bar-style"  content="black-translucent">
  <meta name="apple-mobile-web-app-title"             content="AbdoPro">
  <meta name="mobile-web-app-capable"  content="yes">

  <title>AbdoPro ‚Äî Progression Abdominaux</title>

  <!-- ‚îÄ‚îÄ Manifest & Ic√¥nes ‚îÄ‚îÄ -->
  <link rel="manifest"        href="manifest.json">
  <link rel="icon"             href="favicon.ico">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">

  <!-- ‚îÄ‚îÄ Feuilles de styles (ordre intentionnel) ‚îÄ‚îÄ
       1. main.css       ‚Üí Reset, variables CSS, layout global
       2. components.css  ‚Üí Composants UI r√©utilisables
       3. themes.css      ‚Üí Surcharges th√®me clair / sombre
  -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/themes.css">

  <!-- ‚îÄ‚îÄ CSS critique inline : √©cran de chargement ‚îÄ‚îÄ
       Affich√© imm√©diatement avant le chargement des CSS externes.
       Garantit un premier rendu visuel instantan√©. -->
  <style>
    .loading-screen {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      background: #0a0a0a;
      color: #e0e0e0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      z-index: 9999;
      transition: opacity 0.3s ease-out;
    }

    .loading-screen[hidden] {
      opacity: 0;
      pointer-events: none;
    }

    .loading-logo {
      font-size: 4rem;
      line-height: 1;
    }

    .loading-title {
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: 0.05em;
    }

    .loading-spinner {
      width: 32px;
      height: 32px;
      border: 3px solid rgba(99, 102, 241, 0.2);
      border-top-color: #6366f1;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>

<body>
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       SHELL APPLICATIF
       Structure en 3 zones verticales :
       1. √âcran de chargement (masqu√© apr√®s init)
       2. Conteneur d'√©crans (zone principale)
       3. Barre de navigation inf√©rieure
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="app">

    <!-- ‚îÄ‚îÄ 1. √âcran de chargement ‚îÄ‚îÄ
         Visible uniquement pendant l'initialisation de l'app
         (ouverture DB, lecture √©tat, d√©tection premier lancement).
         Masqu√© par app.js une fois l'init termin√©e. -->
    <div id="app-loading" class="loading-screen" role="status" aria-label="Chargement de l'application">
      <div class="loading-logo" aria-hidden="true">üí™</div>
      <div class="loading-title">AbdoPro</div>
      <div class="loading-spinner" aria-hidden="true"></div>
    </div>

    <!-- ‚îÄ‚îÄ 2. Conteneur d'√©crans ‚îÄ‚îÄ
         Zone unique o√π chaque √©cran est inject√© dynamiquement.
         Le routeur (app.js) remplace le contenu selon le hash.
         aria-live="polite" ‚Üí lecteurs d'√©cran annoncent les changements. -->
    <main id="screen-container"
          class="screen-container"
          role="main"
          aria-live="polite">
    </main>

    <!-- ‚îÄ‚îÄ 3. Barre de navigation inf√©rieure ‚îÄ‚îÄ
         Visible uniquement sur : dashboard, history, settings.
         Masqu√©e sur : onboarding, test-max, session, feedback.
         Chaque bouton porte un data-route utilis√© par le routeur. -->
    <nav id="bottom-nav"
         class="bottom-nav"
         role="navigation"
         aria-label="Navigation principale"
         hidden>

      <button class="nav-item active"
              data-route="dashboard"
              type="button"
              aria-label="Tableau de bord"
              aria-current="page">
        <span class="nav-icon" aria-hidden="true">üè†</span>
        <span class="nav-label">Accueil</span>
      </button>

      <button class="nav-item"
              data-route="history"
              type="button"
              aria-label="Historique et statistiques">
        <span class="nav-icon" aria-hidden="true">üìä</span>
        <span class="nav-label">Stats</span>
      </button>

      <button class="nav-item"
              data-route="settings"
              type="button"
              aria-label="Param√®tres de l'application">
        <span class="nav-icon" aria-hidden="true">‚öôÔ∏è</span>
        <span class="nav-label">R√©glages</span>
      </button>
    </nav>
  </div>

  <!-- ‚îÄ‚îÄ √âl√©ment audio pour le son de fin de repos ‚îÄ‚îÄ
       Charg√© une seule fois, jou√© par js/utils/notifications.js.
       L'attribut preload="auto" garantit la disponibilit√© offline. -->
  <audio id="beep-sound"
         preload="auto"
         src="assets/sounds/beep.mp3"
         aria-hidden="true">
  </audio>

  <!-- ‚îÄ‚îÄ Fallback sans JavaScript ‚îÄ‚îÄ -->
  <noscript>
    <div style="padding:2rem;text-align:center;font-family:sans-serif;background:#0a0a0a;color:#e0e0e0;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;">
      <h1>AbdoPro</h1>
      <p>Cette application n√©cessite JavaScript pour fonctionner.</p>
      <p>Veuillez activer JavaScript dans les param√®tres de votre navigateur.</p>
    </div>
  </noscript>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       CHARGEMENT DES MODULES JAVASCRIPT
       
       Point d'entr√©e unique : app.js
       Utilisation de type="module" (ES6 modules) pour :
       - Import/export natif sans bundler
       - Isolation de scope automatique
       - Chargement diff√©r√© (defer implicite)
       
       app.js importe tous les modules n√©cessaires :
       db.js ‚Üí state.js ‚Üí algorithms/* ‚Üí screens/* ‚Üí utils/*
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <script type="module" src="js/app.js"></script>
</body>
</html>